{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}}}},"/microservice-documents/json":{"get":{"operationId":"MicroserviceDocumentController_getDocumentJson","parameters":[],"responses":{"200":{"description":""}}}},"/microservice-documents/test":{"post":{"operationId":"MicroserviceDocumentController_grpcTest","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GrpcTestDto"}}}},"responses":{"200":{"description":""}}}},"/users/me":{"get":{"operationId":"UserController_getCurrentUser","parameters":[],"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CurrentUserResponse"}}}}},"tags":["Users"],"security":[{"bearer":[]}]},"delete":{"operationId":"UserController_deleteCurrentUser","summary":"","description":"Delete current user (forever)","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteCurrentUserDto"}}}},"responses":{"204":{"description":""}},"tags":["Users"],"security":[{"bearer":[]}]}},"/users/{id}/public-profile":{"get":{"operationId":"UserController_getUserPublicProfile","summary":"","description":"Get user public profile","parameters":[{"name":"id","required":true,"in":"path","description":"User profile id","schema":{}}],"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPublicProfileResponse"}}}}},"tags":["Users"],"security":[{"bearer":[]}]}},"/users/tagged-users":{"get":{"operationId":"UserController_paginateTaggedUsers","summary":"","description":"Get all tagged users","parameters":[{"name":"key","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"default":1,"type":"number","minimum":1}},{"name":"perPage","required":false,"in":"query","schema":{"default":10,"type":"number","minimum":1,"maximum":1000}}],"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaggedUsersPaginationResponse"}}}}},"tags":["Users"],"security":[{"bearer":[]}]}},"/users/spotlist":{"post":{"operationId":"UserController_addSpotList","summary":"","description":"Add a user to spot list","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddSpotListDto"}}}},"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SpotConnectionResponse"}}}}},"tags":["Users"],"security":[{"bearer":[]}]},"delete":{"operationId":"UserController_removeSpotList","summary":"","description":"Remove a user from spot list","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveSpotListDto"}}}},"responses":{"204":{"description":""}},"tags":["Users"],"security":[{"bearer":[]}]}},"/users/me/profile":{"put":{"operationId":"UserController_updateCurrentUserProfile","summary":"","description":"Update user's profile","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserProfileDto"}}}},"responses":{"204":{"description":""}},"tags":["Users"],"security":[{"bearer":[]}]}},"/users/change-password":{"put":{"operationId":"UserController_changePassword","summary":"","description":"Change password","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"204":{"description":""}},"tags":["Users"],"security":[{"bearer":[]}]}},"/reset-password/send-otp-reset-password":{"post":{"operationId":"ResetPasswordController_sendOtpResetPassword","x-rate-limits":[{"limit":60,"ttl":60}],"summary":"","description":"Send otp sms to email to reset password","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendOtpResetPasswordDto"}}}},"responses":{"204":{"description":""}},"tags":["Reset password"]}},"/reset-password":{"put":{"operationId":"ResetPasswordController_resetPassword","summary":"","description":"Change new password","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"204":{"description":""}},"tags":["Reset password"]}},"/reset-password/verify-otp-reset-password":{"post":{"operationId":"ResetPasswordController_verifyOtpResetPassword","summary":"","description":"Verify otp to reset password","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyOtpResetPasswordDto"}}}},"responses":{"204":{"description":""}},"tags":["Reset password"]}},"/auth/sign-up":{"post":{"operationId":"AuthController_signUp","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpDto"}}}},"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpResponse"}}}}},"tags":["Auth"]}},"/auth/sign-in":{"post":{"operationId":"AuthController_signIn","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInDto"}}}},"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInResponse"}}}}},"tags":["Auth"],"actionSetValue":[{"key":"token","value":"token"}]}},"/auth/refresh-token":{"post":{"operationId":"AuthController_refreshToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"201":{"description":""}},"tags":["Auth"]}},"/auth/sign-out":{"delete":{"operationId":"AuthController_signOut","parameters":[],"responses":{"204":{"description":""}},"tags":["Auth"],"security":[{"bearer":[]}]}},"/auth/social-login":{"post":{"operationId":"AuthController_googleLogin","summary":"","description":"Login by social network: facebook, google, twitter, ...","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SocialLoginDto"}}}},"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInResponse"}}}}},"tags":["Auth"]}},"/auth/social-login/auth-url":{"get":{"operationId":"AuthController_getAuthUrl","summary":"","description":"Get social login url. This route for testing only","parameters":[{"name":"type","required":true,"in":"query","schema":{"enum":["FACEBOOK","GOOGLE","TWITTER","APPLE"],"type":"string"}}],"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SocialAuthUrlResponse"}}}}},"tags":["Auth"]}},"/auth/social-login/callback":{"get":{"operationId":"AuthController_callbackGet","summary":"","description":"Callback route from link accessed of social-login/auth-url. This route not for calling directly","parameters":[],"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessTokenResponse"}}}}},"tags":["Auth"]},"post":{"operationId":"AuthController_callbackPost","summary":"","description":"Callback route from link accessed of social-login/auth-url. This route not for calling directly. Currently use for apple only","parameters":[],"responses":{"201":{"description":""}},"tags":["Auth"]}},"/auth/callbacks/sign_in_with_apple":{"post":{"operationId":"AuthController_callbackSignInWithApple","summary":"","description":"The callback route use for Android's apple authentication flow. This route not for calling directly","parameters":[],"responses":{"201":{"description":""}},"tags":["Auth"]}},"/auth/send-otp-sign-up":{"post":{"operationId":"AuthController_sendOtpSignUp","x-rate-limits":[{"limit":60,"ttl":60,"status":429}],"summary":"","description":"Send otp sms to email to sign up","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendOtpDto"}}}},"responses":{"204":{"description":""}},"tags":["Auth"]}},"/auth/verify-otp-sign-up":{"post":{"operationId":"AuthController_verifyOtpSignUp","summary":"","description":"Verify otp to sign up","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyOtpDto"}}}},"responses":{"204":{"description":""}},"tags":["Auth"]}},"/auth/check-username":{"post":{"operationId":"AuthController_checkUsername","summary":"","description":"Check username availability","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckUserNameDto"}}}},"responses":{"200":{"description":""}},"tags":["Auth"]}}},"info":{"title":"Document","description":"The Document API description","version":"1.0","contact":{}},"tags":[],"servers":[{"url":"/user-service"}],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"GrpcTestDto":{"type":"object","properties":{"serviceName":{"type":"string"},"methodName":{"type":"string"},"data":{"type":"object"},"isFindMany":{"type":"boolean"}},"required":["serviceName","methodName","data","isFindMany"]},"FileTypeEnum":{"type":"string","enum":["IMAGE","VIDEO","AUDIO","DOCUMENT"]},"DimensionResponse":{"type":"object","properties":{"width":{"type":"number","example":320},"height":{"type":"number","example":240}}},"ThumbnailResponse":{"type":"object","properties":{"path":{"type":"string","example":"file-name.png_64_27-02-2024"},"name":{"type":"string","example":"file-name.png_64_27-02-2024"},"size":{"type":"number","example":64,"description":"Thumbnail size."},"dimension":{"example":{"size":[128,128],"type":"fhd"},"allOf":[{"$ref":"#/components/schemas/DimensionResponse"}]},"signedUrl":{"type":"string","example":"https://files.s3.us-west-2.amazonaws.com/file-name.png_64_27-02-2024"}},"required":["path","name","size"]},"FileStatusEnum":{"type":"string","enum":["PREPARE_UPLOAD","UPLOAD_SUCCESS","ERROR","OK"]},"FileResponse":{"type":"object","properties":{"id":{"type":"string","example":"041d78bb-bbdd-4b89-9caa-c908ae5bdcae"},"createdAt":{"type":"number","example":1743046254},"updatedAt":{"type":"number","example":1743046254},"name":{"type":"string","example":"file-name.png"},"path":{"type":"string","example":"file-name.png_27-02-2024"},"type":{"example":"DOCUMENT","$ref":"#/components/schemas/FileTypeEnum"},"contentType":{"type":"string","example":"image/png"},"size":{"type":"number","example":1024},"duration":{"type":"number","example":1024},"thumbnails":{"example":[{"url":"https://files.s3.us-west-2.amazonaws.com/file-name.png_64_27-02-2024","size":64}],"type":"array","items":{"$ref":"#/components/schemas/ThumbnailResponse"}},"dimension":{"$ref":"#/components/schemas/DimensionResponse"},"message":{"type":"string","example":"file-name.png_27-02-2024"},"userId":{"type":"string","example":"0ddd63d6-4fb1-458e-b4e1-761652ccb13b"},"status":{"example":"PREPARE_UPLOAD","$ref":"#/components/schemas/FileStatusEnum"},"signedUrl":{"type":"string","example":"https://files.s3.us-west-2.amazonaws.com/file-name.png_64_27-02-2024"}},"required":["id","name","path","type","contentType","duration","userId","status"]},"GenderEnum":{"type":"string","enum":["MALE","FEMALE","OTHER"]},"CurrentUserResponse":{"type":"object","properties":{"id":{"type":"string","example":"041d78bb-bbdd-4b89-9caa-c908ae5bdcae"},"createdAt":{"type":"number","example":1743046254},"updatedAt":{"type":"number","example":1743046254},"email":{"type":"string","example":"Gudrun_Watsica-Donnelly@example.org"},"firstName":{"type":"string","example":"Cecilia"},"lastName":{"type":"string","example":"Weimann"},"userName":{"type":"string","example":"Joel Roob"},"birthday":{"type":"string","example":"1990-01-01"},"avatarId":{"type":"string","example":"a899b87f-13d9-4cca-b05f-6e5c9feba2b2"},"avatar":{"$ref":"#/components/schemas/FileResponse"},"gender":{"example":"MALE","$ref":"#/components/schemas/GenderEnum"},"totalSmypes":{"type":"number","example":10},"isSocialAccount":{"type":"boolean"}},"required":["id","email","firstName","lastName","userName","birthday","totalSmypes","isSocialAccount"]},"UserPublicProfileResponse":{"type":"object","properties":{"id":{"type":"string","example":"041d78bb-bbdd-4b89-9caa-c908ae5bdcae"},"createdAt":{"type":"number","example":1743046254},"updatedAt":{"type":"number","example":1743046254},"email":{"type":"string","example":"Gudrun_Watsica-Donnelly@example.org"},"firstName":{"type":"string","example":"Cecilia"},"lastName":{"type":"string","example":"Weimann"},"userName":{"type":"string","example":"Joel Roob"},"birthday":{"type":"string","example":"1990-01-01"},"avatarId":{"type":"string","example":"a899b87f-13d9-4cca-b05f-6e5c9feba2b2"},"avatar":{"$ref":"#/components/schemas/FileResponse"},"gender":{"example":"MALE","$ref":"#/components/schemas/GenderEnum"},"totalSmypes":{"type":"number","example":10},"isInSpotList":{"type":"boolean"}},"required":["id","email","firstName","lastName","userName","birthday","totalSmypes","isInSpotList"]},"OmittedUserResponse":{"type":"object","properties":{"id":{"type":"string","example":"041d78bb-bbdd-4b89-9caa-c908ae5bdcae"},"createdAt":{"type":"number","example":1743046254},"updatedAt":{"type":"number","example":1743046254},"firstName":{"type":"string","example":"Cecilia"},"lastName":{"type":"string","example":"Weimann"},"userName":{"type":"string","example":"Joel Roob"},"avatarId":{"type":"string","example":"a899b87f-13d9-4cca-b05f-6e5c9feba2b2"},"avatar":{"$ref":"#/components/schemas/FileResponse"}},"required":["id","firstName","lastName","userName"]},"TaggedUsersPaginationResponse":{"type":"object","properties":{"total":{"type":"number","example":5893149850574669},"lastPage":{"type":"number","example":6207295217061162},"perPage":{"type":"number","example":7925450367910253},"currentPage":{"type":"number","example":8844474172487471},"items":{"type":"array","items":{"$ref":"#/components/schemas/OmittedUserResponse"}}},"required":["total","lastPage","perPage","currentPage","items"]},"AddSpotListDto":{"type":"object","properties":{"toUserId":{"type":"string","example":"f455b7a1-c4fe-4fe9-afdf-73903e28438c"}},"required":["toUserId"]},"SpotConnectionResponse":{"type":"object","properties":{"id":{"type":"string","example":"041d78bb-bbdd-4b89-9caa-c908ae5bdcae"},"createdAt":{"type":"number","example":1743046254},"updatedAt":{"type":"number","example":1743046254},"fromUserId":{"type":"string","example":"6d6dafd1-1f3a-4137-9dc7-611793ac30c7"},"toUserId":{"type":"string","example":"53ff4e3d-ecdf-4f87-ba91-fcca79bc31ab"}},"required":["id","fromUserId","toUserId"]},"RemoveSpotListDto":{"type":"object","properties":{"toUserId":{"type":"string","example":"f455b7a1-c4fe-4fe9-afdf-73903e28438c"}},"required":["toUserId"]},"UpdateUserProfileDto":{"type":"object","properties":{"firstName":{"type":"string","example":"firstName"},"lastName":{"type":"string","example":"lastName"},"birthday":{"format":"date-time","type":"string","example":"1990-01-01"},"userName":{"type":"string","example":"Laverna_McClure57"},"avatarId":{"type":"string","example":"0f269991-08cc-4485-ad3e-766a2242db1f"},"gender":{"type":"string","enum":["MALE","FEMALE","OTHER"],"example":"OTHER"}}},"ChangePasswordDto":{"type":"object","properties":{"oldPassword":{"type":"string"},"newPassword":{"type":"string"}},"required":["oldPassword","newPassword"]},"DeleteCurrentUserDto":{"type":"object","properties":{"password":{"type":"string"},"userName":{"type":"string"}},"required":["password","userName"]},"SendOtpResetPasswordDto":{"type":"object","properties":{"email":{"type":"string","example":"John.Doe74@gmail.com"}},"required":["email"]},"ResetPasswordDto":{"type":"object","properties":{"email":{"type":"string","example":"Jeanne_Doe@gmail.com"},"password":{"type":"string"}},"required":["email","password"]},"VerifyOtpResetPasswordDto":{"type":"object","properties":{"email":{"type":"string","example":"Jeanne.Doe@gmail.com"},"otp":{"type":"string","example":"270147"}},"required":["email","otp"]},"GetUsersByIdsDto":{"type":"object","properties":{"userIds":{"example":["42c8cd65-6e8b-4e5a-80e1-4fb3dbfa6384"],"type":"array","items":{"type":"string"}}},"required":["userIds"]},"UserResponse":{"type":"object","properties":{"id":{"type":"string","example":"041d78bb-bbdd-4b89-9caa-c908ae5bdcae"},"createdAt":{"type":"number","example":1743046254},"updatedAt":{"type":"number","example":1743046254},"email":{"type":"string","example":"Gudrun_Watsica-Donnelly@example.org"},"firstName":{"type":"string","example":"Cecilia"},"lastName":{"type":"string","example":"Weimann"},"userName":{"type":"string","example":"Joel Roob"},"birthday":{"type":"string","example":"1990-01-01"},"avatarId":{"type":"string","example":"a899b87f-13d9-4cca-b05f-6e5c9feba2b2"},"avatar":{"$ref":"#/components/schemas/FileResponse"},"gender":{"example":"MALE","$ref":"#/components/schemas/GenderEnum"}},"required":["id","email","firstName","lastName","userName","birthday"]},"GetUsersCurrentConnection":{"type":"object","properties":{"userIds":{"example":["d32ab4b6-ef57-41ab-a76e-28a8f9da3cd7"],"type":"array","items":{"type":"string"}},"currentUserId":{"type":"string","example":"7831b7ed-7fd6-4176-a68d-c35978e6af34"}},"required":["userIds","currentUserId"]},"UserCurrentConnection":{"type":"object","properties":{"id":{"type":"string","example":"041d78bb-bbdd-4b89-9caa-c908ae5bdcae"},"createdAt":{"type":"number","example":1743046254},"updatedAt":{"type":"number","example":1743046254},"email":{"type":"string","example":"Gudrun_Watsica-Donnelly@example.org"},"firstName":{"type":"string","example":"Cecilia"},"lastName":{"type":"string","example":"Weimann"},"userName":{"type":"string","example":"Joel Roob"},"birthday":{"type":"string","example":"1990-01-01"},"avatarId":{"type":"string","example":"a899b87f-13d9-4cca-b05f-6e5c9feba2b2"},"avatar":{"$ref":"#/components/schemas/FileResponse"},"gender":{"example":"MALE","$ref":"#/components/schemas/GenderEnum"},"isInSpotList":{"type":"boolean"}},"required":["id","email","firstName","lastName","userName","birthday","isInSpotList"]},"GetSpotListUsersDto":{"type":"object","properties":{"userId":{"type":"string"}},"required":["userId"]},"SignUpDto":{"type":"object","properties":{"accessToken":{"type":"string","description":"Access token to verify google, facebook, ... account"},"secretToken":{"type":"string","description":"Only for twitter"},"type":{"type":"string","enum":["FACEBOOK","GOOGLE","TWITTER","APPLE"],"example":"GOOGLE"},"email":{"type":"string","example":"Jeanne_Doe20@gmail.com"},"firstName":{"type":"string","example":"firstName"},"lastName":{"type":"string","example":"lastName"},"birthday":{"format":"date-time","type":"string","example":"1990-01-01"},"userName":{"type":"string","example":"Tomas_Dooley"},"password":{"type":"string"},"avatarId":{"type":"string","example":"2cf5bb4f-105b-402f-8ffa-d7c09db3ea23"},"gender":{"type":"string","enum":["MALE","FEMALE","OTHER"],"example":"OTHER"}},"required":["email","firstName","lastName","birthday","userName","password","gender"]},"SignUpResponse":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserResponse"},"token":{"type":"string"},"refreshToken":{"type":"string"},"expireAt":{"type":"number","example":1733373034}},"required":["user","token","refreshToken","expireAt"]},"SignInDto":{"type":"object","properties":{"emailOrUserName":{"type":"string"},"password":{"type":"string"}},"required":["emailOrUserName","password"]},"SignInResponse":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserResponse"},"token":{"type":"string"},"refreshToken":{"type":"string"},"expireAt":{"type":"number","example":1733373034}},"required":["user","token","refreshToken","expireAt"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]},"SocialLoginDto":{"type":"object","properties":{"accessToken":{"type":"string","description":"Access token to verify google, facebook, ... account"},"secretToken":{"type":"string","description":"Only for twitter"},"type":{"type":"string","enum":["FACEBOOK","GOOGLE","TWITTER","APPLE"],"example":"GOOGLE"}},"required":["accessToken","secretToken","type"]},"SocialAuthUrlResponse":{"type":"object","properties":{"authUrl":{"type":"string"}},"required":["authUrl"]},"AccessTokenResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"secretToken":{"type":"string"}},"required":["accessToken","secretToken"]},"SendOtpDto":{"type":"object","properties":{"email":{"type":"string","example":"John.Doe@gmail.com"}},"required":["email"]},"VerifyOtpDto":{"type":"object","properties":{"email":{"type":"string","example":"Jeanne.Doe79@gmail.com"},"otp":{"type":"string","example":"534881"}},"required":["email","otp"]},"CheckUserNameDto":{"type":"object","properties":{"userName":{"type":"string","example":"Ervin.Toy"}},"required":["userName"]},"VerifyTokenDto":{"type":"object","properties":{"token":{"type":"string","example":"Y93dzP_aN-R174p00tuUT"}},"required":["token"]},"VerifiedTokenResponse":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserResponse"}},"required":["user"]}}}}